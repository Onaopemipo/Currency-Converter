<!DOCTYPE html>
<html>
<head>
	<title>Currncy Converter</title>
</head>
<body>
	<div id="commments"></div>
<script>

	function createNode(element)
	{
		return document.createElement(element);
	}
	function append(parent, child)
	{
		return parent.appendChild(child);
	}

	const Select = document.getElementById('CurrencyFrom');

	//let outputVal = "<select name= 'details'>";
	//document.getElementById('getIt').addEventListener('click', getText);

	 /* fetch('https://free.currencyconverterapi.com/api/v5/countries')
	  .then((response) => response.json())
	   .then((data) => 
	   {
	   	let Mydata = data.results;
	   
	   	for(i in Mydata)
	   		{
	   			console.log(i);
	   		}
	   })
	   
	   	//let outputVal = "<select name= 'details'>";
	//document.getElementById('getIt').addEventListener('click', getText);*/

fetch('https://free.currencyconverterapi.com/api/v5/currencies')
	  .then((response) => response.json())
	   .then((data) => 
	   {
	       	var myDiv = document.getElementById("CurrencyFrom");
            //var selectList = document.createElement("select");
            //selectList.id = "CurrencyFrom";
	   		for (results in data.results) 
	   		{
	   		        var option = document.createElement("option");
                    option.value = data.results[results].id;
                    option.text = data.results[results].id;
                    //selectList.appendChild(option);
                    myDiv.appendChild(option);
	   		}
	   }
);


fetch('https://free.currencyconverterapi.com/api/v5/currencies')
	  .then((response) => response.json())
	   .then((data) => 
	   {
	       	var myDiv = document.getElementById("CurrencyTo");
            //var selectList = document.createElement("select");
            //selectList.id = "CurrencyFrom";
	   		for (results in data.results) 
	   		{
	   		        var option = document.createElement("option");
                    option.value = data.results[results].id;
                    option.text = data.results[results].id;
                    //selectList.appendChild(option);
                    myDiv.appendChild(option);
                   // data.results[results].currencyName;
	   		}

	   }
);

        function converter(amount, CurrencyFrom, CurrencyTo, cb)
        {
            amount = document.getElementById('amount').value;
            CurrencyFrom = document.getElementById('CurrencyFrom').value;
            CurrencyTo = document.getElementById('CurrencyTo').value;
            var query = CurrencyFrom + '_' + CurrencyTo;
            var url = 'https://free.currencyconverterapi.com/api/v6/convert?q='+query+'&compact=y';
             fetch(url)
            .then((response) => response.json())
            .then((data) => 
            	{
            		for(i in data)
            		{
            		 var result =  data[i].val;
            		 var amount = document.getElementById("amount").value;
            		 var total = result * amount;
            		 document.getElementById("result").value = Math.round(total);
            		}
            	});
        }

</script>
	<div>
		<div><h2>Select Currency</h2></div>
		<form method="POST" action="#">
		    <input type="number" name="amount" placeholder="1" id="amount">
			<select name="Currencytoconvert" id="CurrencyFrom">
			</select>
			<input type="text" name="to"  placeholder="To" disabled>
			<select name="Currencyconvertedto" id="CurrencyTo">
			</select>
			<input type="text" name="result" id="result">
			<input type="button" name="Convert" value="Convert" onclick="converter();">
		</form>
	</div>

</body>
</html>